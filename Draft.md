# Установка Xen
На данном этапе установлена система, которая будет ялятся нудевым доменом.
Рядом с ней есть свободное место

    sudo apt-get install xen-system-amd64

После перезагрузки можно будет зайти на эту же систему под рутом xen

Чтобы посмотреть информацию о гипервизоре надо ввести

    xl dmesg

Убедимся в поддержке виртуализации:

![img](img/Screenshot%20from%202023-05-21%2020-41-05.png)

Чтобы работать с памятью необходимо установить LVM

    sudo apt-get install lvm2
    
 Не надо трогать диск во время работы с ним, а то будет вот это:

![img](img/Fail.png)

Чтобы посмотреть информацию о дисках нужно ввести:
	
	lsblk	
	
![img](img/Devices.png)

Рядом с линуксом было свободное место без системы. Чтобы добавить туда систему на которую будут устанавливаться домены воспользуемся приложением disk:

![img](img/Disk.png)

Теперь естьсистема на /dev/sda2

![img](img/New-disk.png)


Воспользуемся ранее установленной тулой для работы с виртуальными дисками(volume groups):

	sudo pvcreate /dev/sda2
	sudo vgcreate vg0 /dev/sda2

![img](VgCreate.png)

## Создание виртуального свича
Чтобы виртуальные машины могли иметь доступ к интернету необходимо сделать виртуальный роутер на соновной машине:

	sudo apt-get install bridge-utils
	
Далее необходимо отредактировать конфигурационный файл:

	sudo vim /etc/network/interfaces
	
Редактируем:
![img](img/Config.png)

НАДО УСТАНОВИТЬ ifupdown

![img](img/WithUpdown.png)

## Создание системы 
	sudo apt-get install xen-tools
	sudo xen-create-image --hostname=tutorial-pv-guest   --memory=512mb   --vcpus=2   --lvm=vg0   --dhcp   --pygrub   --dist=wheezy
	
	
# При запуске образа возникла проблема
Для ее исправления попробовал переписать файл граба
![img](img/Change-grub.png)

Чтобы сохранить конфигурации граба его надо установить:
	sudo update-grub
	
